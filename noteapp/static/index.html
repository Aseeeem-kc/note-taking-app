<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Note Taking App</title>
</head>
<body>
    <h1>Note Taking App</h1>

    <!-- Form for adding new note -->
    <form id="addNoteForm">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required><br>
        <label for="content">Content:</label><br>
        <textarea id="content" name="content" required></textarea><br>
        <button type="submit">Add Note</button>
    </form>

    <!-- Container to display existing notes -->
    <div id="notesContainer"></div>

    <script>
        // Function to fetch all notes from the backend
        async function fetchNotes() {
            const response = await fetch('http://127.0.0.1:8000/notes/');
            const notes = await response.json();
            return notes;
        }

        // Function to render notes on the page
        async function renderNotes() {
            const notes = await fetchNotes();
            const notesContainer = document.getElementById('http://127.0.0.1:8000/notesContainer');
            notesContainer.innerHTML = ''; // Clear previous content
            notes.forEach(note => {
                const noteElement = document.createElement('div');
                noteElement.innerHTML = `
                    <h2>${note.title}</h2>
                    <p>${note.content}</p>
                    <button onclick="editNote(${note.id})">Edit</button>
                    <button onclick="deleteNote(${note.id})">Delete</button>
                `;
                notesContainer.appendChild(noteElement);
            });
        }

        // Function to add a new note
        async function addNote() {
            const form = document.getElementById('addNoteForm');
            const formData = new FormData(form);
            const response = await fetch('/notes/', {
                method: 'POST',
                body: formData
            });
            if (response.ok) {
                renderNotes();
                form.reset(); // Reset the form fields
            } else {
                alert('Failed to add note');
            }
        }

        // Function to delete a note
        async function deleteNote(noteId) {
            const response = await fetch(`http://127.0.0.1:8000/notes/${noteId}`, {
                method: 'DELETE'
            });
            if (response.ok) {
                renderNotes();
            } else {
                alert('Failed to delete note');
            }
        }

        // Function to edit a note (not implemented in this example)
        function editNote(noteId) {
            // Implement edit functionality if needed
            alert('Edit functionality not implemented in this example');
        }

        // Render initial notes when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            renderNotes();
        });

        // Attach event listener to the form submission
        document.getElementById('addNoteForm').addEventListener('submit', (event) => {
            event.preventDefault(); // Prevent default form submission
            addNote(); // Call addNote function to add a new note
        });
    </script>
</body>
</html>
